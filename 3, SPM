SPM packages are simple source code directories containing a "spmbuild.sh" file
the script puts all output files in ".cache/spm" under the source code directory
SPM packages do not need dependency tracking
because all the dependencies will be hard'linked to the application's directory

to build a package:
; spm build <url|package-name>
this downloads the source code from the given URL (gnunet/git) into "$spm_dir/packages/<url-hash>",
	then runs "sh $spm_dir/packages/<url-hash>/spmbuild.sh"
	("$spm_dir" is "/spm" when "spm" is run as root, and "~/.local/spm" otherwise)
when instead of a URL, a package name is given,
	it just runs the "spmbuild.sh" script of a package already exists in "$spm_dir/packages/<package-name>"
	this happens for builtin or customized packages

to install a package:
; spm install <package-name> [<url>]
this command:
, builds the package (as explained above)
, if a URL is given, put it in "$spm_dir/packages/<package-name>/.cache/spm/data/url" file
	later this will be used to update the app
, creates hard links from files in "$spm_dir/packages/<package-name>/.cache/spm" directory,
	into "$spm_dir/installed/<package-name>" directory (recursively)
, creates symlinks from files mentioned in "$spm_dir/installed/<package-name>/data/apps" file,
	into "$apps_dir" directory
	("$apps_dir" is "/apps" when "spm" is run as root, and "~/.local/bin" otherwise)
, creates symlinks from "$spm_dir/installed/<package-name>/data/*.desktop" files into "$gui_apps_dir"
	("$gui_apps_dir" is "/apps/gui" when "spm" is run as root, and "~/.local/share/applications" otherwise)

when "spm" is run as root, the "spmbuild.sh" scripts will be run as specific system users
so for each package installed by root, there is a system user with the name "spm-<package-name|url-hash>"

public keys for a package downloaded from a URL can be stored in "$spm_dir/keys/<url-hash>"
spm uses these keys to check the signature of packages when downloading/updating them

if you want to customize the configurations of an SPM package:
, create "$spm_dir/packages/<package-name>/spmbuild.sh" containing:
	, build command for the package we want to customize: spm build <url>
	, commands to hard link the required files
	, commands to apply the custom configurations
, run "spm install <package-name>"
this way to customize packages, without the need for "/etc"

to remove an installed app:
; spm remove <package-name>
this command:
, removes the files mentioned in "$spm_dir/installed/<package-name>/data/apps" from "/apps"
, removes files in "/apps/gui/" corresponding to "$spm_dir/installed/<package-name>/data/*.desktop"
, removes "$spm_dir/installed/<package-name>" directory
